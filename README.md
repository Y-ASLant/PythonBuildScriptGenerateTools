# Nuitka打包脚本生成器

一个交互式的CLI程序，用于生成Nuitka编译的Python脚本，简化Python应用程序的打包过程。

## 功能特性

- 🚀 **交互式界面** - 友好的命令行交互体验
- 📁 **智能文件选择** - 自动验证入口文件和图标文件
- 🔧 **多编译器支持** - 支持MinGW64、MSVC、Clang
- 🖥️ **控制台选项** - 可选择是否显示控制台窗口
- 📦 **打包模式** - 支持独立打包和单文件打包
- 🎨 **图标支持** - 仅支持ICO格式图标（符合Nuitka要求）
- 🔌 **插件系统** - 支持14种常用插件选择（PyQt5/6、PySide2/6等）
- 📝 **Python脚本生成** - 生成完整的Python构建脚本
- 📁 **文件复制功能** - 自动复制资源目录和UI文件
- ⚡ **多线程编译** - 可配置编译线程数
- 🏢 **企业级选项** - 支持公司名称和版本信息
- ⏸️ **用户友好** - 程序结束前暂停，方便查看结果

## 安装要求

```bash
# 使用uv安装依赖
uv sync

# 或使用pip安装
pip install nuitka>=2.7.12 setuptools>=80.9.0
```

## 使用方法

### 1. 运行CLI程序

```bash
python main.py
```

### 2. 按提示输入配置信息

程序会依次询问以下配置：

- **入口文件**: Python主程序文件路径
- **应用名称**: 生成的可执行文件名称
- **图标文件**: 应用程序图标（仅支持.ico格式）
- **编译器**: 选择编译器（MinGW64/MSVC/Clang）
- **控制台**: 是否显示控制台窗口
- **输出目录**: 编译输出目录
- **打包模式**: 独立打包或单文件打包
- **单文件模式**: 是否启用单文件模式（仅在独立打包时可选）
- **公司名称**: 可执行文件的公司信息（可选）
- **文件版本**: 可执行文件版本号
- **编译线程**: 并行编译的线程数
- **插件选择**: 是否启用额外插件及具体插件选择
- **复制目录**: 需要复制到输出目录的资源文件夹

### 3. 生成Python构建脚本

程序会自动生成 `build.py` 脚本文件，包含完整的Nuitka编译逻辑和文件复制功能。

### 4. 执行编译

运行生成的Python脚本：

```bash
python build.py
```

## 插件支持

程序支持14种常用插件，分为三个类别：

### 📱 GUI框架插件
- **PyQt5** - PyQt5 GUI框架 (推荐)
- **PyQt6** - PyQt6 GUI框架
- **PySide2** - PySide2 GUI框架
- **PySide6** - PySide6 GUI框架 (推荐)
- **tk-inter** - Tkinter GUI支持

### 🔬 科学计算库
- **numpy** - NumPy数值计算库
- **scipy** - SciPy科学计算库
- **pandas** - Pandas数据分析库
- **matplotlib** - Matplotlib绘图库

### 🛠️ 其他常用库
- **pillow** - Pillow图像处理库
- **requests** - Requests HTTP库
- **sqlalchemy** - SQLAlchemy数据库ORM
- **multiprocessing** - 多进程支持
- **eventlet** - Eventlet异步网络库

## 示例

运行程序的完整示例：

1. 运行 `python main.py`
2. 输入入口文件: `main.py`
3. 选择是否启用额外插件: `y`
4. 选择插件: `1,6` (PyQt5 + NumPy)
5. 按提示完成其他配置
6. 运行生成的 `python build.py`

## 生成的Python脚本示例

生成的`build.py`脚本包含：
- 完整的Nuitka编译参数配置
- 自动文件和目录复制功能
- 错误处理和进度显示
- UI文件(.ui)自动复制
- 资源目录批量复制

```python
args = [
    "nuitka",
    "--standalone",
    "--onefile",
    "--assume-yes-for-downloads",
    "--mingw64",
    "--show-progress",
    "--show-memory",
    "--windows-company-name=aslant.top",
    "--windows-file-version=1.0.0",
    "--output-dir=build",
    "--output-filename=main",
    "--jobs=16",
    "--windows-icon-from-ico=app.ico",
    "--enable-plugin=pyqt5",
    "--enable-plugin=pyqt6",
    "main.py",
]
```

## 支持的配置选项

| 选项 | 描述 | 默认值 |
|------|------|--------|
| 入口文件 | Python主程序文件 | 必填 |
| 应用名称 | 可执行文件名称 | 入口文件名 |
| 图标文件 | 应用程序图标（仅.ico格式） | 无 |
| 编译器 | 编译器选择 | MinGW64 |
| 显示控制台 | 是否显示控制台 | 否 |
| 输出目录 | 编译输出目录 | build |
| 独立打包 | 是否创建独立可执行文件 | 是 |
| 单文件模式 | 是否启用单文件模式 | 否 |
| 启用插件 | 是否启用额外插件 | 否 |
| 公司名称 | 可执行文件公司信息 | 无 |
| 文件版本 | 可执行文件版本 | 1.0.0 |
| 编译线程 | 并行编译线程数 | 4 |
| 复制目录 | 需要复制的资源目录 | 无 |

## 注意事项

1. **编译器要求**: 确保系统已安装选择的编译器
2. **依赖处理**: Nuitka会自动处理大部分Python依赖
3. **插件支持**: 可选择启用14种常用插件，包括GUI框架和科学计算库
4. **文件路径**: 支持相对路径和绝对路径
5. **图标格式**: 仅支持ICO格式图标文件（符合Nuitka要求）
6. **资源复制**: 自动复制指定目录和.ui文件到输出目录
7. **多线程编译**: 根据CPU核心数调整编译线程数以提高速度
8. **单文件模式**: 仅在独立打包模式下可选择单文件模式
9. **用户体验**: 程序完成后会暂停，按任意键退出

## 故障排除

### 常见问题

**Q: 编译失败，提示找不到编译器**
A: 确保已安装MinGW64或其他选择的编译器

**Q: 生成的exe文件很大**
A: 这是正常的，独立打包会包含Python运行时

**Q: 程序运行时缺少模块**
A: 检查是否需要添加特定的Nuitka插件

**Q: 资源文件找不到**
A: 确保在配置时正确指定了需要复制的目录

**Q: 编译速度慢**
A: 可以增加编译线程数，但不要超过CPU核心数

## 许可证

MIT License
